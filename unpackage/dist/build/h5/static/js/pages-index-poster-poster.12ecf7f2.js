(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-poster-poster"],{"0dd5":function(t,e,o){"use strict";var s,i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"poster"},[o("v-uni-view",{staticClass:"content_img"},[o("v-uni-image",{attrs:{src:t.poster,mode:""}})],1),o("v-uni-canvas",{attrs:{"canvas-id":"myCanvas",id:"cvs"}}),o("v-uni-view",{staticClass:"poster_content"},[o("v-uni-view",{staticClass:"poster_text"}),o("v-uni-view",{staticClass:"poster_img"},[o("v-uni-image",{attrs:{src:t.url,mode:"aspectFit"}})],1),o("v-uni-view",{staticClass:"poster_btn flex"},[o("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goback.apply(void 0,arguments)}}},[o("v-uni-image",{attrs:{src:"../../../static/img/back_again.png",mode:"aspectFit"}})],1),o("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.copyFn.apply(void 0,arguments)}}},[o("v-uni-image",{attrs:{src:"../../../static/img/generate_poster.png",mode:"aspectFit"}})],1)],1)],1)],1)},a=[];o.d(e,"b",function(){return i}),o.d(e,"c",function(){return a}),o.d(e,"a",function(){return s})},"0fe8":function(t,e,o){e=t.exports=o("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */@media only screen and (min-height:600px) and (max-height:668px){.poster[data-v-32ce3d60]{width:100%;height:100vh;position:relative}.poster #cvs[data-v-32ce3d60]{position:absolute;width:%?750?%;height:100vh;top:%?-99999899?%;left:%?-99999899?%;z-index:9999}.poster .poster_content[data-v-32ce3d60]{width:100%;height:90vh;position:relative;padding:30px 40px 0;box-sizing:border-box;top:10vh;left:0}.poster .poster_content .share[data-v-32ce3d60]{position:absolute;top:-55px;right:10px}.poster .poster_content .share uni-image[data-v-32ce3d60]{width:100px;height:50px}.poster .poster_content .poster_text[data-v-32ce3d60]{height:20vh;position:relative}.poster .poster_content .poster_text uni-text[data-v-32ce3d60]{font-size:1.6rem;font-weight:550;font-style:italic;letter-spacing:4px;color:#fff;text-shadow:4px 3px 5px rgba(0,0,0,.3)}.poster .poster_content .poster_img[data-v-32ce3d60]{height:50vh;position:relative;top:0;left:0}.poster .poster_content .poster_img uni-image[data-v-32ce3d60]{position:absolute;bottom:-4%;left:50%;margin-left:-112px;width:225px;height:341px}.poster .poster_content .poster_btn[data-v-32ce3d60]{width:100%;-webkit-justify-content:space-around;justify-content:space-around;position:relative;top:10px;left:0}.poster .poster_content .poster_btn uni-view[data-v-32ce3d60]{text-align:center;width:50%}.poster .poster_content .poster_btn uni-view uni-image[data-v-32ce3d60]{width:100px;height:40px}.poster .share_success[data-v-32ce3d60]{width:100%;height:100vh;position:fixed;top:0;left:0;background:rgba(0,0,0,.3)}.poster .share_success .suss_img[data-v-32ce3d60]{position:absolute;top:50%;left:50%;margin:-120px 0 0 -134px}.poster .share_success .suss_img uni-image[data-v-32ce3d60]{width:279px}.poster .share_success .suss_back[data-v-32ce3d60]{position:absolute;bottom:0;right:20px}.poster .share_success .suss_back uni-image[data-v-32ce3d60]{width:68px;height:48px}}@media only screen and (min-height:668px) and (max-height:699px){.poster[data-v-32ce3d60]{width:100%;height:100vh;position:relative}.poster #cvs[data-v-32ce3d60]{position:absolute;width:%?750?%;height:100vh;top:%?-99999899?%;left:%?-99999899?%;z-index:9999}.poster .poster_content[data-v-32ce3d60]{width:100%;height:90vh;position:relative;padding:30px 40px 0;box-sizing:border-box;top:10vh;left:0}.poster .poster_content .share[data-v-32ce3d60]{position:absolute;top:-55px;right:10px}.poster .poster_content .share uni-image[data-v-32ce3d60]{width:100px;height:50px}.poster .poster_content .poster_text[data-v-32ce3d60]{height:20vh;position:relative}.poster .poster_content .poster_text uni-text[data-v-32ce3d60]{font-size:1.6rem;font-weight:550;font-style:italic;letter-spacing:4px;color:#fff;text-shadow:4px 3px 5px rgba(0,0,0,.3)}.poster .poster_content .poster_img[data-v-32ce3d60]{height:50vh;position:relative;top:0;left:0}.poster .poster_content .poster_img uni-image[data-v-32ce3d60]{position:absolute;bottom:-10%;left:50%;margin-left:-112px;width:250px;height:384px}.poster .poster_content .poster_btn[data-v-32ce3d60]{width:100%;-webkit-justify-content:space-around;justify-content:space-around;position:relative;top:10px;left:0}.poster .poster_content .poster_btn uni-view[data-v-32ce3d60]{text-align:center;width:50%}.poster .poster_content .poster_btn uni-view uni-image[data-v-32ce3d60]{width:100px;height:40px}.poster .share_success[data-v-32ce3d60]{width:100%;height:100vh;position:fixed;top:0;left:0;background:rgba(0,0,0,.3)}.poster .share_success .suss_img[data-v-32ce3d60]{position:absolute;top:50%;left:50%;margin:-120px 0 0 -134px}.poster .share_success .suss_img uni-image[data-v-32ce3d60]{width:279px}.poster .share_success .suss_back[data-v-32ce3d60]{position:absolute;bottom:0;right:20px}.poster .share_success .suss_back uni-image[data-v-32ce3d60]{width:68px;height:48px}}@media only screen and (min-height:700px){.poster[data-v-32ce3d60]{width:100%;height:100vh;position:relative}.poster #cvs[data-v-32ce3d60]{position:absolute;width:%?750?%;height:100vh;top:%?-99999899?%;left:%?-99999899?%;z-index:9999}.poster .poster_content[data-v-32ce3d60]{width:100%;height:90vh;position:relative;padding:30px 40px 0;box-sizing:border-box;top:10vh;left:0}.poster .poster_content .share[data-v-32ce3d60]{position:absolute;top:-55px;right:10px}.poster .poster_content .share uni-image[data-v-32ce3d60]{width:100px;height:50px}.poster .poster_content .poster_text[data-v-32ce3d60]{height:20vh;position:relative}.poster .poster_content .poster_text uni-text[data-v-32ce3d60]{font-size:1.6rem;font-weight:550;font-style:italic;letter-spacing:4px;color:#fff;text-shadow:4px 3px 5px rgba(0,0,0,.3)}.poster .poster_content .poster_img[data-v-32ce3d60]{height:50vh;position:relative;top:0;left:0}.poster .poster_content .poster_img uni-image[data-v-32ce3d60]{position:absolute;bottom:-4%;left:50%;margin-left:-112px;width:225px;height:341px}.poster .poster_content .poster_btn[data-v-32ce3d60]{width:100%;-webkit-justify-content:space-around;justify-content:space-around;position:relative;top:10px;left:0}.poster .poster_content .poster_btn uni-view[data-v-32ce3d60]{text-align:center;width:50%}.poster .poster_content .poster_btn uni-view uni-image[data-v-32ce3d60]{width:100px;height:40px}.poster .share_success[data-v-32ce3d60]{width:100%;height:100vh;position:fixed;top:0;left:0;background:rgba(0,0,0,.3)}.poster .share_success .suss_img[data-v-32ce3d60]{position:absolute;top:50%;left:50%;margin:-120px 0 0 -134px}.poster .share_success .suss_img uni-image[data-v-32ce3d60]{width:279px}.poster .share_success .suss_back[data-v-32ce3d60]{position:absolute;bottom:0;right:20px}.poster .share_success .suss_back uni-image[data-v-32ce3d60]{width:68px;height:48px}}',""])},"38c8":function(t,e,o){"use strict";o.r(e);var s=o("d995"),i=o.n(s);for(var a in s)"default"!==a&&function(t){o.d(e,t,function(){return s[t]})}(a);e["default"]=i.a},"70b4":function(t,e,o){var s=o("0fe8");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=o("4f06").default;i("10d0acdc",s,!0,{sourceMap:!1,shadowMode:!1})},"958a":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;o("c1f8");var s=uni.getStorageSync("Token"),i="http://api.whale.act.go-tech.cn/",a={uploadPoster:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.code,o=t.photo,a=t.success,n=t.fail,r=t.complete;uni.uploadFile({url:i+"app/graph/graph_save",filePath:o,name:"file",formData:{code:e},header:{Token:s},success:function(t){a&&a(t)},fail:function(t){n&&n(t)},complete:function(t){r&&r(t)}})}};e.default=a},"959e":function(t,e,o){t.exports=o.p+"static/img/poster3.b6d1faa1.png"},9893:function(t,e,o){t.exports=o.p+"static/img/poster1.786f2874.png"},ba88:function(t,e,o){"use strict";o.r(e);var s=o("0dd5"),i=o("38c8");for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);o("e20a");var n,r=o("f0c5"),p=Object(r["a"])(i["default"],s["b"],s["c"],!1,null,"32ce3d60",null,!1,s["a"],n);e["default"]=p.exports},d995:function(t,e,o){"use strict";var s=o("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o("34ef"),o("28a5");var i=s(o("958a")),a=s(o("efe9")),n=s(o("9893")),r=s(o("f897")),p=s(o("959e")),c={data:function(){return{share:!1,url:"",poster:"",code:""}},onLoad:function(t){1==t.poster||2==t.poster?this.poster=n.default:3==t.poster||4==t.poster?this.poster=r.default:5==t.poster||6==t.poster?this.poster=p.default:this.poster=a.default,this.code=t.code,this.url=t.url,this.getPoster()},methods:{getPoster:function(){try{var t=uni.getStorageSync("man");t&&(this.url=t)}catch(e){}},goback:function(){uni.navigateBack({delta:1})},copyFn:function(){var t,e,o=this,s=uni.createSelectorQuery().in(this);s.select("#cvs").boundingClientRect(function(s){if(t=s.width,e=s.height,console.log(s),e<668){var a=uni.createCanvasContext("myCanvas");a.drawImage(o.poster,0,0,t,e),a.drawImage(o.url,t/2-100,e-410,220,340),a.setFillStyle("#000"),a.setTextAlign("center")}else if(e<699){a=uni.createCanvasContext("myCanvas");a.drawImage(o.poster,0,0,t,e),a.drawImage(o.url,t/2-100,e-450,240,380),a.setFillStyle("#000"),a.setTextAlign("center")}else{a=uni.createCanvasContext("myCanvas");a.drawImage(o.poster,0,0,t,e),a.drawImage(o.url,t/2-110,e-440,220,340),a.setFillStyle("#000"),a.setTextAlign("center")}a.draw(),uni.showLoading({mask:!0,title:"图片生成中"}),setTimeout(function(){uni.canvasToTempFilePath({canvasId:"myCanvas",success:function(t){i.default.uploadPoster({code:o.code,photo:t.tempFilePath,success:function(t){console.log(t),uni.showToast({title:"海报生成成功",duration:3e3,success:function(){if(200==t.statusCode){var e=JSON.parse(t.data);console.log(e),0==e.code?(uni.removeStorage({key:"man"}),uni.setStorage({key:"poster",data:e.whaleGraph.photo}),uni.setStorage({key:"graphId",data:e.whaleGraph.id}),o.$router.push({name:"sharePoster",params:{havePoster:!1}})):uni.showToast({title:e.msg,icon:"none",duration:3e3})}}})},fail:function(t){console.log(t)},complete:function(t){console.log(t)}})}}),uni.hideLoading()},1200)}).exec()},getblob:function(t){for(var e=atob(t.split(",")[1]),o=t.split(",")[0].split(":")[1].split(";")[0],s=new ArrayBuffer(e.length),i=new Uint8Array(s),a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return new Blob([s],{type:o})}}};e.default=c},e20a:function(t,e,o){"use strict";var s=o("70b4"),i=o.n(s);i.a},efe9:function(t,e,o){t.exports=o.p+"static/img/poster.195317c0.png"},f897:function(t,e,o){t.exports=o.p+"static/img/poster2.c5ecaf5e.png"}}]);